{"pageProps":{"blog":{"id":"2021-10-19_retrun-binary-data-in-aws-api-gateway","title":"Amazon API Gatewayでバイナリデータを返す","publishedAt":"2021-10-19","body":"<p>API Gateway を使ってバイナリデータを返却する場合、設定が必要だったのでメモしとく。</p>\n<h3>困ってること</h3>\n<p>画像が表示されない。</p>\n<p>細かいこと書くのがめんどうなので図にしました。</p>\n<p><img src=\"https://dsm01pap001files.storage.live.com/y4mIv945BbjauH35T-tREJzF2lzwfmAwJ6T9kWF2ZR2DkNnxIeJl9D-8Y9qOIjSNcRf96KScFwqmbJbWBJgb6TG6J2moLi-xerMaIJv-5Cbc8oYIFoAhjlOiQrg2kaI-1KkQg-huNwgrVuJHs9a3lx17IRNzQb-I_MQLspoaAdTEhiJ_EthWUjhWkLdZZAyl3Gr?encodeFailures=1&#x26;width=589&#x26;height=211\" alt=\"occurrence.png\"></p>\n<h3>やったこと</h3>\n<p>API Gatewayの設定でバイナリメディアタイプに <code>text/html</code> を設定</p>\n<p><a href=\"https://aws.amazon.com/jp/premiumsupport/knowledge-center/api-gateway-binary-data-lambda/\">Lambdaプロキシ統合を使用して、バイナリデータを処理するAPI Gateway APIを設定するにはどうすればよいですか？</a> によると、ブラウザから送信してるAcceptヘッダーのデフォルトが <code>text/html</code> らしいので、バイナリメディアタイプとして追加する必要があるらしい。</p>\n<blockquote>\n<p>注: ウェブブラウザは複数の値を含む Accept ヘッダーを自動的に送信します。デフォルトでは、最初の値は常に html/text です。API Gateway は最初の値のみを参照するので、text/html をバイナリメディアタイプとして API に追加する必要があります。そうでないと、次のエラーメッセージが表示されます</p>\n</blockquote>\n"}},"__N_SSG":true}